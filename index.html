<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jquery-leftMenu</title>
    <link rel="stylesheet" href="jquery-leftMenu/leftMenu.css">
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="jquery-leftMenu/leftMenu.js"></script>
    <script src="data.js"></script>
    <style>
        .demo{
            width: 300px;
        }
        .demo-item{
            height: 30px;
            line-height: 30px;
        }
        .demo-item.active{
            color: white;
            background-color: #3388ff;
        }
        .demo-item.notLeaf::before{
            content: url("forder.png");
            display: inline-block;
            top: 3px;
            position: relative;
        }
        .demo-item.notLeaf.active::before{
            content: url("forder_active.png");
        }
        .demo-item.notLeaf::after{
            content: ">";
            display: inline-block;
            float: right;
            margin-right: 4px;
        }
        .demo-item.notLeaf.isExpand::after{
            -moz-transform:rotate(90deg);
            -webkit-transform:rotate(90deg);
            -ms-transform:rotate(90deg);
            transform:rotate(90deg);
        }
    </style>
</head>
<body>
<div id="leftMenu" class="demo"></div>
<input id="change" type="button" value="修改数据但不重置状态">
<input id="change2" type="button" value="修改数据并重置状态">
<script>
    $("#leftMenu").leftMenu({
        datas:[],
        formatter:function(currentData,isLeaf,isActive,isExpand,level,idx,currentDatas,upperData,datas){
            return $("<div/>",{
                "class":function(){
                    var cls="demo-item ";
                    if(!isLeaf){
                        cls+="notLeaf ";
                    }
                    if(isActive){
                        cls+=" active";
                    }
                    if(isExpand){
                        cls+="isExpand";
                    }
                    return cls;
                }
            }).append(
                    $("<span/>",{
                        "text":currentData.name
                    })
            )
        },
        onSelected:function(currentData,isLeaf,isActive,isExpand,level,idx,currentDatas,upperData,datas){
            console.log(this.leftMenu("getSelected"));
        },
        rowEvents: {
            "click":function(currentData,isLeaf,isActive,isExpand,level,idx,currentDatas,upperData,datas,event){
                event.stopPropagation();
                this.leftMenu("selectById",currentData.id);
            }
        }
    });
    $.get("data.json").done(function(datas){
        $("#leftMenu").leftMenu("setDatas",datas);
    });
    $("#change").on("click",function(){
        $.get("data.json").done(function(datas){
            $("#leftMenu").leftMenu("setDatas",datas);
        });
    });
    $("#change2").on("click",function(){
        $.get("data.json").done(function(datas){
            $("#leftMenu").leftMenu("setDatas",datas,true);
        });
    });
</script>
</body>
</html>